---
import Layout from "@layout/Layout.astro";
import InnerPageHeader from "@components/InnerPageHeader.astro";
import PostsList from "@components/Pages/Blog/PostsList.astro";
import Footer from "@components/Footer.astro";
import { getSanity } from "@lib/api";
import { getImageUrl } from "@lib/getImage";

const seo = await getSanity('blogSeo')
const img = getImageUrl(seo[0].image).url()
import { getSanityOrder } from '@lib/apiOrderable'

const header = await getSanity('blog')
const posts = await getSanityOrder('blogList')
const footer = await getSanity("footer")
---

<Layout title={seo[0].title} barbaPage="news" descr={seo[0].descr} img={img}>
    <InnerPageHeader title={header[0].title} />
    <PostsList posts={posts} />
    <Footer {...footer[0]}/>
</Layout>